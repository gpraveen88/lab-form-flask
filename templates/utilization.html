{% extends "login_home.html" %}
{% block title %}Machine Allotment{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto py-12 px-4">
  
  <!-- Header -->
  <div class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl shadow-lg py-8 px-6 mb-10 text-center">
    <h2 class="text-4xl font-extrabold text-white mb-2">ğŸŒ¿ Lab Utilization Overview</h2>
    <p class="text-green-100 text-sm">Live status of lab resources â€” total, used, and available systems.</p>
  </div>

  <!-- Lab Utilization Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    {% for lab, stats in lab_stats.items() %}
    <div class="bg-white/70 backdrop-blur-md border border-green-200 rounded-xl shadow-md p-6 hover:shadow-lg transition duration-300">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-green-700">{{ lab }}</h3>
        <div class="text-xs text-gray-600">
          Total: {{ stats.total }}<br>
          Used: {{ stats.used }}<br>
          Free: {{ stats.available }}
        </div>
      </div>

      <div class="relative w-full h-4 bg-green-100 rounded-full overflow-hidden mb-2">
        <div class="absolute top-0 left-0 h-4 bg-gradient-to-r from-emerald-400 to-green-600 rounded-full"
             style="width: {{ (stats.used / stats.total * 100) if stats.total else 0 }}%;">
        </div>
      </div>

      <div class="text-right text-xs text-gray-500 font-medium">
        {{ (stats.used / stats.total * 100) | round(2) if stats.total else 0 }}% Occupied
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Back Button -->
  <div class="mt-12 text-center">
    <a href="/login_home" class="inline-block bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-lg shadow-md transition">
      â¬…ï¸ Back to Dashboard
    </a>
  </div>

</div>
{% endblock %}
